{"ast":null,"code":"import { Networks } from '@stellar/stellar-sdk';\nimport { isConnected, getPublicKey, signTransaction, setAllowed, isAllowed } from '@stellar/freighter-api';\nexport class FreighterWalletService {\n  constructor() {\n    this.publicKey = null;\n  }\n  async connect() {\n    try {\n      // Check if Freighter is installed\n      const connected = await isConnected();\n      if (!connected) {\n        throw new Error('Freighter wallet not installed. Please install from https://freighter.app/');\n      }\n\n      // Check if we're allowed to access Freighter\n      const allowed = await isAllowed();\n      if (!allowed) {\n        await setAllowed();\n      }\n\n      // Get the public key\n      const publicKey = await getPublicKey();\n      this.publicKey = publicKey;\n      return {\n        publicKey,\n        walletType: 'freighter'\n      };\n    } catch (error) {\n      var _error$message, _error$message2;\n      if ((_error$message = error.message) !== null && _error$message !== void 0 && _error$message.includes('User declined access')) {\n        throw new Error('Please allow access to Freighter wallet and try again.');\n      }\n      if ((_error$message2 = error.message) !== null && _error$message2 !== void 0 && _error$message2.includes('not installed')) {\n        throw new Error('Freighter wallet not installed. Please install from https://freighter.app/');\n      }\n      throw new Error(`Failed to connect to Freighter wallet: ${error.message}`);\n    }\n  }\n  async waitForFreighter(timeout = 3000) {\n    return new Promise(resolve => {\n      // Check multiple possible Freighter locations\n      if (window.freighter || window.freighterApi || window.stellar) {\n        resolve();\n        return;\n      }\n      let attempts = 0;\n      const maxAttempts = timeout / 100;\n      const checkFreighter = () => {\n        attempts++;\n        if (window.freighter || window.freighterApi || window.stellar || attempts >= maxAttempts) {\n          resolve();\n        } else {\n          setTimeout(checkFreighter, 100);\n        }\n      };\n      checkFreighter();\n    });\n  }\n  getFreighterApi() {\n    // Try different ways Freighter might be available\n    if (window.freighter) return window.freighter;\n    if (window.freighterApi) return window.freighterApi;\n    if (window.stellar) return window.stellar;\n\n    // Try the @stellar/freighter-api package\n    try {\n      return window.freighterApi;\n    } catch {\n      return null;\n    }\n  }\n  disconnect() {\n    this.publicKey = null;\n  }\n  getPublicKey() {\n    return this.publicKey;\n  }\n  async signTransaction(xdr) {\n    const freighterApi = this.getFreighterApi();\n    if (!freighterApi) {\n      throw new Error('Freighter wallet not available');\n    }\n    if (!this.publicKey) {\n      throw new Error('Wallet not connected');\n    }\n    try {\n      const network = process.env.REACT_APP_STELLAR_NETWORK === 'mainnet' ? 'PUBLIC' : 'TESTNET';\n      return await freighterApi.signTransaction(xdr, network);\n    } catch (error) {\n      throw new Error('Transaction signing failed. Please try again.');\n    }\n  }\n  isConnected() {\n    const freighterApi = this.getFreighterApi();\n    return !!this.publicKey && !!freighterApi;\n  }\n}\nexport class AlbedoWalletService {\n  constructor() {\n    this.publicKey = null;\n  }\n  async connect() {\n    if (!window.albedo) {\n      throw new Error('Albedo wallet not available. Please visit https://albedo.link/');\n    }\n    try {\n      const result = await window.albedo.publicKey();\n      this.publicKey = result.pubkey;\n      return {\n        publicKey: result.pubkey,\n        walletType: 'albedo'\n      };\n    } catch (error) {\n      throw new Error('Failed to connect to Albedo wallet');\n    }\n  }\n  disconnect() {\n    this.publicKey = null;\n  }\n  getPublicKey() {\n    return this.publicKey;\n  }\n  async signTransaction(xdr) {\n    if (!window.albedo) {\n      throw new Error('Albedo wallet not available');\n    }\n    if (!this.publicKey) {\n      throw new Error('Wallet not connected');\n    }\n    try {\n      const network = process.env.REACT_APP_STELLAR_NETWORK === 'mainnet' ? Networks.PUBLIC : Networks.TESTNET;\n      const result = await window.albedo.tx({\n        xdr,\n        network\n      });\n      return result.signed_envelope_xdr;\n    } catch (error) {\n      throw new Error('Transaction signing failed');\n    }\n  }\n  isConnected() {\n    return !!this.publicKey;\n  }\n}\nexport class WalletManager {\n  constructor() {\n    this.currentWallet = null;\n    this.connectionListeners = [];\n    // Try to restore connection on page load\n    this.restoreConnection();\n  }\n  async connectFreighter() {\n    const wallet = new FreighterWalletService();\n    const connection = await wallet.connect();\n    this.currentWallet = wallet;\n    this.saveConnection(connection);\n    this.notifyListeners(connection);\n    return connection;\n  }\n  async connectAlbedo() {\n    const wallet = new AlbedoWalletService();\n    const connection = await wallet.connect();\n    this.currentWallet = wallet;\n    this.saveConnection(connection);\n    this.notifyListeners(connection);\n    return connection;\n  }\n  disconnect() {\n    if (this.currentWallet) {\n      this.currentWallet.disconnect();\n      this.currentWallet = null;\n    }\n    localStorage.removeItem('stellar_pump_wallet');\n    this.notifyListeners(null);\n  }\n  getCurrentWallet() {\n    return this.currentWallet;\n  }\n  getPublicKey() {\n    var _this$currentWallet;\n    return ((_this$currentWallet = this.currentWallet) === null || _this$currentWallet === void 0 ? void 0 : _this$currentWallet.getPublicKey()) || null;\n  }\n  async signTransaction(xdr) {\n    if (!this.currentWallet) {\n      throw new Error('No wallet connected');\n    }\n    return await this.currentWallet.signTransaction(xdr);\n  }\n  isConnected() {\n    var _this$currentWallet2;\n    return ((_this$currentWallet2 = this.currentWallet) === null || _this$currentWallet2 === void 0 ? void 0 : _this$currentWallet2.isConnected()) || false;\n  }\n  onConnectionChange(listener) {\n    this.connectionListeners.push(listener);\n\n    // Return unsubscribe function\n    return () => {\n      const index = this.connectionListeners.indexOf(listener);\n      if (index > -1) {\n        this.connectionListeners.splice(index, 1);\n      }\n    };\n  }\n  saveConnection(connection) {\n    localStorage.setItem('stellar_pump_wallet', JSON.stringify(connection));\n  }\n  async restoreConnection() {\n    try {\n      const saved = localStorage.getItem('stellar_pump_wallet');\n      if (!saved) return;\n      const connection = JSON.parse(saved);\n      if (connection.walletType === 'freighter') {\n        // Wait for Freighter to load\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        if (window.freighter) {\n          try {\n            const wallet = new FreighterWalletService();\n            await wallet.connect();\n            this.currentWallet = wallet;\n            this.notifyListeners(connection);\n          } catch (error) {\n            console.log('Could not restore Freighter connection:', error);\n            localStorage.removeItem('stellar_pump_wallet');\n          }\n        }\n      } else if (connection.walletType === 'albedo') {\n        // Albedo doesn't persist connections, user needs to reconnect\n        localStorage.removeItem('stellar_pump_wallet');\n      }\n    } catch (error) {\n      console.warn('Failed to restore wallet connection:', error);\n      localStorage.removeItem('stellar_pump_wallet');\n    }\n  }\n  notifyListeners(connection) {\n    this.connectionListeners.forEach(listener => listener(connection));\n  }\n}\n\n// Singleton instance\nexport const walletManager = new WalletManager();","map":{"version":3,"names":["Networks","isConnected","getPublicKey","signTransaction","setAllowed","isAllowed","FreighterWalletService","constructor","publicKey","connect","connected","Error","allowed","walletType","error","_error$message","_error$message2","message","includes","waitForFreighter","timeout","Promise","resolve","window","freighter","freighterApi","stellar","attempts","maxAttempts","checkFreighter","setTimeout","getFreighterApi","disconnect","xdr","network","process","env","REACT_APP_STELLAR_NETWORK","AlbedoWalletService","albedo","result","pubkey","PUBLIC","TESTNET","tx","signed_envelope_xdr","WalletManager","currentWallet","connectionListeners","restoreConnection","connectFreighter","wallet","connection","saveConnection","notifyListeners","connectAlbedo","localStorage","removeItem","getCurrentWallet","_this$currentWallet","_this$currentWallet2","onConnectionChange","listener","push","index","indexOf","splice","setItem","JSON","stringify","saved","getItem","parse","console","log","warn","forEach","walletManager"],"sources":["C:/Users/Debojyoti DM/Desktop/assetlifecyclesdk/frontend/src/services/WalletService.ts"],"sourcesContent":["import { \r\n  Networks\r\n} from '@stellar/stellar-sdk';\r\nimport { \r\n  isConnected, \r\n  getPublicKey, \r\n  signTransaction,\r\n  setAllowed,\r\n  isAllowed \r\n} from '@stellar/freighter-api';\r\n\r\nexport interface WalletConnection {\r\n  publicKey: string;\r\n  walletType: 'freighter' | 'albedo';\r\n}\r\n\r\nexport interface TransactionResult {\r\n  hash: string;\r\n  successful: boolean;\r\n  error?: string;\r\n}\r\n\r\nexport interface WalletService {\r\n  connect(): Promise<WalletConnection>;\r\n  disconnect(): void;\r\n  getPublicKey(): string | null;\r\n  signTransaction(xdr: string): Promise<string>;\r\n  isConnected(): boolean;\r\n}\r\n\r\ndeclare global {\r\n  interface Window {\r\n    freighter?: any;\r\n    freighterApi?: any;\r\n    albedo?: {\r\n      publicKey(): Promise<{ pubkey: string }>;\r\n      tx(options: { xdr: string; network: string }): Promise<{ signed_envelope_xdr: string }>;\r\n    };\r\n  }\r\n}\r\n\r\nexport class FreighterWalletService implements WalletService {\r\n  private publicKey: string | null = null;\r\n\r\n  async connect(): Promise<WalletConnection> {\r\n    try {\r\n      // Check if Freighter is installed\r\n      const connected = await isConnected();\r\n      if (!connected) {\r\n        throw new Error('Freighter wallet not installed. Please install from https://freighter.app/');\r\n      }\r\n\r\n      // Check if we're allowed to access Freighter\r\n      const allowed = await isAllowed();\r\n      if (!allowed) {\r\n        await setAllowed();\r\n      }\r\n\r\n      // Get the public key\r\n      const publicKey = await getPublicKey();\r\n      this.publicKey = publicKey;\r\n      \r\n      return {\r\n        publicKey,\r\n        walletType: 'freighter'\r\n      };\r\n    } catch (error: any) {\r\n      if (error.message?.includes('User declined access')) {\r\n        throw new Error('Please allow access to Freighter wallet and try again.');\r\n      }\r\n      if (error.message?.includes('not installed')) {\r\n        throw new Error('Freighter wallet not installed. Please install from https://freighter.app/');\r\n      }\r\n      throw new Error(`Failed to connect to Freighter wallet: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  private async waitForFreighter(timeout = 3000): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      // Check multiple possible Freighter locations\r\n      if (window.freighter || window.freighterApi || (window as any).stellar) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      let attempts = 0;\r\n      const maxAttempts = timeout / 100;\r\n\r\n      const checkFreighter = () => {\r\n        attempts++;\r\n        if (window.freighter || window.freighterApi || (window as any).stellar || attempts >= maxAttempts) {\r\n          resolve();\r\n        } else {\r\n          setTimeout(checkFreighter, 100);\r\n        }\r\n      };\r\n\r\n      checkFreighter();\r\n    });\r\n  }\r\n\r\n  private getFreighterApi() {\r\n    // Try different ways Freighter might be available\r\n    if (window.freighter) return window.freighter;\r\n    if (window.freighterApi) return window.freighterApi;\r\n    if ((window as any).stellar) return (window as any).stellar;\r\n    \r\n    // Try the @stellar/freighter-api package\r\n    try {\r\n      return (window as any).freighterApi;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  disconnect(): void {\r\n    this.publicKey = null;\r\n  }\r\n\r\n  getPublicKey(): string | null {\r\n    return this.publicKey;\r\n  }\r\n\r\n  async signTransaction(xdr: string): Promise<string> {\r\n    const freighterApi = this.getFreighterApi();\r\n    if (!freighterApi) {\r\n      throw new Error('Freighter wallet not available');\r\n    }\r\n\r\n    if (!this.publicKey) {\r\n      throw new Error('Wallet not connected');\r\n    }\r\n\r\n    try {\r\n      const network = process.env.REACT_APP_STELLAR_NETWORK === 'mainnet' \r\n        ? 'PUBLIC' \r\n        : 'TESTNET';\r\n      \r\n      return await freighterApi.signTransaction(xdr, network);\r\n    } catch (error) {\r\n      throw new Error('Transaction signing failed. Please try again.');\r\n    }\r\n  }\r\n\r\n  isConnected(): boolean {\r\n    const freighterApi = this.getFreighterApi();\r\n    return !!this.publicKey && !!freighterApi;\r\n  }\r\n}\r\n\r\nexport class AlbedoWalletService implements WalletService {\r\n  private publicKey: string | null = null;\r\n\r\n  async connect(): Promise<WalletConnection> {\r\n    if (!window.albedo) {\r\n      throw new Error('Albedo wallet not available. Please visit https://albedo.link/');\r\n    }\r\n\r\n    try {\r\n      const result = await window.albedo.publicKey();\r\n      this.publicKey = result.pubkey;\r\n      \r\n      return {\r\n        publicKey: result.pubkey,\r\n        walletType: 'albedo'\r\n      };\r\n    } catch (error) {\r\n      throw new Error('Failed to connect to Albedo wallet');\r\n    }\r\n  }\r\n\r\n  disconnect(): void {\r\n    this.publicKey = null;\r\n  }\r\n\r\n  getPublicKey(): string | null {\r\n    return this.publicKey;\r\n  }\r\n\r\n  async signTransaction(xdr: string): Promise<string> {\r\n    if (!window.albedo) {\r\n      throw new Error('Albedo wallet not available');\r\n    }\r\n\r\n    if (!this.publicKey) {\r\n      throw new Error('Wallet not connected');\r\n    }\r\n\r\n    try {\r\n      const network = process.env.REACT_APP_STELLAR_NETWORK === 'mainnet' \r\n        ? Networks.PUBLIC \r\n        : Networks.TESTNET;\r\n      \r\n      const result = await window.albedo.tx({\r\n        xdr,\r\n        network\r\n      });\r\n      \r\n      return result.signed_envelope_xdr;\r\n    } catch (error) {\r\n      throw new Error('Transaction signing failed');\r\n    }\r\n  }\r\n\r\n  isConnected(): boolean {\r\n    return !!this.publicKey;\r\n  }\r\n}\r\n\r\nexport class WalletManager {\r\n  private currentWallet: WalletService | null = null;\r\n  private connectionListeners: ((connection: WalletConnection | null) => void)[] = [];\r\n\r\n  constructor() {\r\n    // Try to restore connection on page load\r\n    this.restoreConnection();\r\n  }\r\n\r\n  async connectFreighter(): Promise<WalletConnection> {\r\n    const wallet = new FreighterWalletService();\r\n    const connection = await wallet.connect();\r\n    \r\n    this.currentWallet = wallet;\r\n    this.saveConnection(connection);\r\n    this.notifyListeners(connection);\r\n    \r\n    return connection;\r\n  }\r\n\r\n  async connectAlbedo(): Promise<WalletConnection> {\r\n    const wallet = new AlbedoWalletService();\r\n    const connection = await wallet.connect();\r\n    \r\n    this.currentWallet = wallet;\r\n    this.saveConnection(connection);\r\n    this.notifyListeners(connection);\r\n    \r\n    return connection;\r\n  }\r\n\r\n  disconnect(): void {\r\n    if (this.currentWallet) {\r\n      this.currentWallet.disconnect();\r\n      this.currentWallet = null;\r\n    }\r\n    \r\n    localStorage.removeItem('stellar_pump_wallet');\r\n    this.notifyListeners(null);\r\n  }\r\n\r\n  getCurrentWallet(): WalletService | null {\r\n    return this.currentWallet;\r\n  }\r\n\r\n  getPublicKey(): string | null {\r\n    return this.currentWallet?.getPublicKey() || null;\r\n  }\r\n\r\n  async signTransaction(xdr: string): Promise<string> {\r\n    if (!this.currentWallet) {\r\n      throw new Error('No wallet connected');\r\n    }\r\n\r\n    return await this.currentWallet.signTransaction(xdr);\r\n  }\r\n\r\n  isConnected(): boolean {\r\n    return this.currentWallet?.isConnected() || false;\r\n  }\r\n\r\n  onConnectionChange(listener: (connection: WalletConnection | null) => void): () => void {\r\n    this.connectionListeners.push(listener);\r\n    \r\n    // Return unsubscribe function\r\n    return () => {\r\n      const index = this.connectionListeners.indexOf(listener);\r\n      if (index > -1) {\r\n        this.connectionListeners.splice(index, 1);\r\n      }\r\n    };\r\n  }\r\n\r\n  private saveConnection(connection: WalletConnection): void {\r\n    localStorage.setItem('stellar_pump_wallet', JSON.stringify(connection));\r\n  }\r\n\r\n  private async restoreConnection(): Promise<void> {\r\n    try {\r\n      const saved = localStorage.getItem('stellar_pump_wallet');\r\n      if (!saved) return;\r\n\r\n      const connection: WalletConnection = JSON.parse(saved);\r\n      \r\n      if (connection.walletType === 'freighter') {\r\n        // Wait for Freighter to load\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        \r\n        if (window.freighter) {\r\n          try {\r\n            const wallet = new FreighterWalletService();\r\n            await wallet.connect();\r\n            this.currentWallet = wallet;\r\n            this.notifyListeners(connection);\r\n          } catch (error) {\r\n            console.log('Could not restore Freighter connection:', error);\r\n            localStorage.removeItem('stellar_pump_wallet');\r\n          }\r\n        }\r\n      } else if (connection.walletType === 'albedo') {\r\n        // Albedo doesn't persist connections, user needs to reconnect\r\n        localStorage.removeItem('stellar_pump_wallet');\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to restore wallet connection:', error);\r\n      localStorage.removeItem('stellar_pump_wallet');\r\n    }\r\n  }\r\n\r\n  private notifyListeners(connection: WalletConnection | null): void {\r\n    this.connectionListeners.forEach(listener => listener(connection));\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nexport const walletManager = new WalletManager();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}