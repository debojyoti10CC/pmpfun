{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { walletManager } from '../services/WalletService';\nexport function useWallet() {\n  _s();\n  const [connection, setConnection] = useState(null);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    // Subscribe to connection changes\n    const unsubscribe = walletManager.onConnectionChange(newConnection => {\n      setConnection(newConnection);\n      if (newConnection) {\n        setError(null);\n      }\n    });\n\n    // Check initial connection state\n    if (walletManager.isConnected()) {\n      const publicKey = walletManager.getPublicKey();\n      if (publicKey) {\n        setConnection({\n          publicKey,\n          walletType: 'freighter' // Default assumption, could be improved\n        });\n      }\n    }\n    return unsubscribe;\n  }, []);\n  const connectFreighter = async () => {\n    setIsConnecting(true);\n    setError(null);\n    try {\n      await walletManager.connectFreighter();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to connect wallet');\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n  const connectAlbedo = async () => {\n    setIsConnecting(true);\n    setError(null);\n    try {\n      await walletManager.connectAlbedo();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to connect wallet');\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n  const disconnect = () => {\n    walletManager.disconnect();\n    setError(null);\n  };\n  return {\n    connection,\n    isConnected: !!connection,\n    isConnecting,\n    error,\n    connectFreighter,\n    connectAlbedo,\n    disconnect,\n    publicKey: (connection === null || connection === void 0 ? void 0 : connection.publicKey) || null\n  };\n}\n_s(useWallet, \"eeDuL/kua7/59IG0JbCWSm2Xids=\");","map":{"version":3,"names":["useState","useEffect","walletManager","useWallet","_s","connection","setConnection","isConnecting","setIsConnecting","error","setError","unsubscribe","onConnectionChange","newConnection","isConnected","publicKey","getPublicKey","walletType","connectFreighter","err","Error","message","connectAlbedo","disconnect"],"sources":["C:/Users/Debojyoti DM/Desktop/assetlifecyclesdk/frontend/src/hooks/useWallet.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { walletManager, WalletConnection } from '../services/WalletService';\r\n\r\nexport interface UseWalletReturn {\r\n  connection: WalletConnection | null;\r\n  isConnected: boolean;\r\n  isConnecting: boolean;\r\n  error: string | null;\r\n  connectFreighter: () => Promise<void>;\r\n  connectAlbedo: () => Promise<void>;\r\n  disconnect: () => void;\r\n  publicKey: string | null;\r\n}\r\n\r\nexport function useWallet(): UseWalletReturn {\r\n  const [connection, setConnection] = useState<WalletConnection | null>(null);\r\n  const [isConnecting, setIsConnecting] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Subscribe to connection changes\r\n    const unsubscribe = walletManager.onConnectionChange((newConnection) => {\r\n      setConnection(newConnection);\r\n      if (newConnection) {\r\n        setError(null);\r\n      }\r\n    });\r\n\r\n    // Check initial connection state\r\n    if (walletManager.isConnected()) {\r\n      const publicKey = walletManager.getPublicKey();\r\n      if (publicKey) {\r\n        setConnection({\r\n          publicKey,\r\n          walletType: 'freighter' // Default assumption, could be improved\r\n        });\r\n      }\r\n    }\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const connectFreighter = async () => {\r\n    setIsConnecting(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await walletManager.connectFreighter();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to connect wallet');\r\n    } finally {\r\n      setIsConnecting(false);\r\n    }\r\n  };\r\n\r\n  const connectAlbedo = async () => {\r\n    setIsConnecting(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await walletManager.connectAlbedo();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to connect wallet');\r\n    } finally {\r\n      setIsConnecting(false);\r\n    }\r\n  };\r\n\r\n  const disconnect = () => {\r\n    walletManager.disconnect();\r\n    setError(null);\r\n  };\r\n\r\n  return {\r\n    connection,\r\n    isConnected: !!connection,\r\n    isConnecting,\r\n    error,\r\n    connectFreighter,\r\n    connectAlbedo,\r\n    disconnect,\r\n    publicKey: connection?.publicKey || null,\r\n  };\r\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,aAAa,QAA0B,2BAA2B;AAa3E,OAAO,SAASC,SAASA,CAAA,EAAoB;EAAAC,EAAA;EAC3C,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGN,QAAQ,CAA0B,IAAI,CAAC;EAC3E,MAAM,CAACO,YAAY,EAAEC,eAAe,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAgB,IAAI,CAAC;EAEvDC,SAAS,CAAC,MAAM;IACd;IACA,MAAMU,WAAW,GAAGT,aAAa,CAACU,kBAAkB,CAAEC,aAAa,IAAK;MACtEP,aAAa,CAACO,aAAa,CAAC;MAC5B,IAAIA,aAAa,EAAE;QACjBH,QAAQ,CAAC,IAAI,CAAC;MAChB;IACF,CAAC,CAAC;;IAEF;IACA,IAAIR,aAAa,CAACY,WAAW,CAAC,CAAC,EAAE;MAC/B,MAAMC,SAAS,GAAGb,aAAa,CAACc,YAAY,CAAC,CAAC;MAC9C,IAAID,SAAS,EAAE;QACbT,aAAa,CAAC;UACZS,SAAS;UACTE,UAAU,EAAE,WAAW,CAAC;QAC1B,CAAC,CAAC;MACJ;IACF;IAEA,OAAON,WAAW;EACpB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMO,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnCV,eAAe,CAAC,IAAI,CAAC;IACrBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF,MAAMR,aAAa,CAACgB,gBAAgB,CAAC,CAAC;IACxC,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZT,QAAQ,CAACS,GAAG,YAAYC,KAAK,GAAGD,GAAG,CAACE,OAAO,GAAG,0BAA0B,CAAC;IAC3E,CAAC,SAAS;MACRb,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC;EAED,MAAMc,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChCd,eAAe,CAAC,IAAI,CAAC;IACrBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF,MAAMR,aAAa,CAACoB,aAAa,CAAC,CAAC;IACrC,CAAC,CAAC,OAAOH,GAAG,EAAE;MACZT,QAAQ,CAACS,GAAG,YAAYC,KAAK,GAAGD,GAAG,CAACE,OAAO,GAAG,0BAA0B,CAAC;IAC3E,CAAC,SAAS;MACRb,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC;EAED,MAAMe,UAAU,GAAGA,CAAA,KAAM;IACvBrB,aAAa,CAACqB,UAAU,CAAC,CAAC;IAC1Bb,QAAQ,CAAC,IAAI,CAAC;EAChB,CAAC;EAED,OAAO;IACLL,UAAU;IACVS,WAAW,EAAE,CAAC,CAACT,UAAU;IACzBE,YAAY;IACZE,KAAK;IACLS,gBAAgB;IAChBI,aAAa;IACbC,UAAU;IACVR,SAAS,EAAE,CAAAV,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEU,SAAS,KAAI;EACtC,CAAC;AACH;AAACX,EAAA,CArEeD,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}