{"ast":null,"code":"import { Networks } from '@stellar/stellar-sdk';\nexport class FreighterWalletService {\n  constructor() {\n    this.publicKey = null;\n  }\n  async connect() {\n    // Wait for Freighter to load\n    await this.waitForFreighter();\n    if (!window.freighter) {\n      throw new Error('Freighter wallet not installed. Please install from https://freighter.app/');\n    }\n    try {\n      // Check if Freighter is available\n      const isAllowed = await window.freighter.isAllowed();\n      if (!isAllowed) {\n        await window.freighter.setAllowed();\n      }\n      const publicKey = await window.freighter.getPublicKey();\n      this.publicKey = publicKey;\n      return {\n        publicKey,\n        walletType: 'freighter'\n      };\n    } catch (error) {\n      var _error$message;\n      if ((_error$message = error.message) !== null && _error$message !== void 0 && _error$message.includes('User declined access')) {\n        throw new Error('Please allow access to Freighter wallet and try again.');\n      }\n      throw new Error('Failed to connect to Freighter wallet. Please make sure it is unlocked.');\n    }\n  }\n  async waitForFreighter(timeout = 3000) {\n    return new Promise(resolve => {\n      if (window.freighter) {\n        resolve();\n        return;\n      }\n      let attempts = 0;\n      const maxAttempts = timeout / 100;\n      const checkFreighter = () => {\n        attempts++;\n        if (window.freighter || attempts >= maxAttempts) {\n          resolve();\n        } else {\n          setTimeout(checkFreighter, 100);\n        }\n      };\n      checkFreighter();\n    });\n  }\n  disconnect() {\n    this.publicKey = null;\n  }\n  getPublicKey() {\n    return this.publicKey;\n  }\n  async signTransaction(xdr) {\n    if (!window.freighter) {\n      throw new Error('Freighter wallet not available');\n    }\n    if (!this.publicKey) {\n      throw new Error('Wallet not connected');\n    }\n    try {\n      const network = process.env.REACT_APP_STELLAR_NETWORK === 'mainnet' ? 'PUBLIC' : 'TESTNET';\n      return await window.freighter.signTransaction(xdr, network);\n    } catch (error) {\n      throw new Error('Transaction signing failed. Please try again.');\n    }\n  }\n  isConnected() {\n    return !!this.publicKey && !!window.freighter;\n  }\n}\nexport class AlbedoWalletService {\n  constructor() {\n    this.publicKey = null;\n  }\n  async connect() {\n    if (!window.albedo) {\n      throw new Error('Albedo wallet not available. Please visit https://albedo.link/');\n    }\n    try {\n      const result = await window.albedo.publicKey();\n      this.publicKey = result.pubkey;\n      return {\n        publicKey: result.pubkey,\n        walletType: 'albedo'\n      };\n    } catch (error) {\n      throw new Error('Failed to connect to Albedo wallet');\n    }\n  }\n  disconnect() {\n    this.publicKey = null;\n  }\n  getPublicKey() {\n    return this.publicKey;\n  }\n  async signTransaction(xdr) {\n    if (!window.albedo) {\n      throw new Error('Albedo wallet not available');\n    }\n    if (!this.publicKey) {\n      throw new Error('Wallet not connected');\n    }\n    try {\n      const network = process.env.REACT_APP_STELLAR_NETWORK === 'mainnet' ? Networks.PUBLIC : Networks.TESTNET;\n      const result = await window.albedo.tx({\n        xdr,\n        network\n      });\n      return result.signed_envelope_xdr;\n    } catch (error) {\n      throw new Error('Transaction signing failed');\n    }\n  }\n  isConnected() {\n    return !!this.publicKey;\n  }\n}\nexport class WalletManager {\n  constructor() {\n    this.currentWallet = null;\n    this.connectionListeners = [];\n    // Try to restore connection on page load\n    this.restoreConnection();\n  }\n  async connectFreighter() {\n    const wallet = new FreighterWalletService();\n    const connection = await wallet.connect();\n    this.currentWallet = wallet;\n    this.saveConnection(connection);\n    this.notifyListeners(connection);\n    return connection;\n  }\n  async connectAlbedo() {\n    const wallet = new AlbedoWalletService();\n    const connection = await wallet.connect();\n    this.currentWallet = wallet;\n    this.saveConnection(connection);\n    this.notifyListeners(connection);\n    return connection;\n  }\n  disconnect() {\n    if (this.currentWallet) {\n      this.currentWallet.disconnect();\n      this.currentWallet = null;\n    }\n    localStorage.removeItem('stellar_pump_wallet');\n    this.notifyListeners(null);\n  }\n  getCurrentWallet() {\n    return this.currentWallet;\n  }\n  getPublicKey() {\n    var _this$currentWallet;\n    return ((_this$currentWallet = this.currentWallet) === null || _this$currentWallet === void 0 ? void 0 : _this$currentWallet.getPublicKey()) || null;\n  }\n  async signTransaction(xdr) {\n    if (!this.currentWallet) {\n      throw new Error('No wallet connected');\n    }\n    return await this.currentWallet.signTransaction(xdr);\n  }\n  isConnected() {\n    var _this$currentWallet2;\n    return ((_this$currentWallet2 = this.currentWallet) === null || _this$currentWallet2 === void 0 ? void 0 : _this$currentWallet2.isConnected()) || false;\n  }\n  onConnectionChange(listener) {\n    this.connectionListeners.push(listener);\n\n    // Return unsubscribe function\n    return () => {\n      const index = this.connectionListeners.indexOf(listener);\n      if (index > -1) {\n        this.connectionListeners.splice(index, 1);\n      }\n    };\n  }\n  saveConnection(connection) {\n    localStorage.setItem('stellar_pump_wallet', JSON.stringify(connection));\n  }\n  async restoreConnection() {\n    try {\n      const saved = localStorage.getItem('stellar_pump_wallet');\n      if (!saved) return;\n      const connection = JSON.parse(saved);\n      if (connection.walletType === 'freighter') {\n        // Wait for Freighter to load\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        if (window.freighter) {\n          try {\n            const wallet = new FreighterWalletService();\n            await wallet.connect();\n            this.currentWallet = wallet;\n            this.notifyListeners(connection);\n          } catch (error) {\n            console.log('Could not restore Freighter connection:', error);\n            localStorage.removeItem('stellar_pump_wallet');\n          }\n        }\n      } else if (connection.walletType === 'albedo') {\n        // Albedo doesn't persist connections, user needs to reconnect\n        localStorage.removeItem('stellar_pump_wallet');\n      }\n    } catch (error) {\n      console.warn('Failed to restore wallet connection:', error);\n      localStorage.removeItem('stellar_pump_wallet');\n    }\n  }\n  notifyListeners(connection) {\n    this.connectionListeners.forEach(listener => listener(connection));\n  }\n}\n\n// Singleton instance\nexport const walletManager = new WalletManager();","map":{"version":3,"names":["Networks","FreighterWalletService","constructor","publicKey","connect","waitForFreighter","window","freighter","Error","isAllowed","setAllowed","getPublicKey","walletType","error","_error$message","message","includes","timeout","Promise","resolve","attempts","maxAttempts","checkFreighter","setTimeout","disconnect","signTransaction","xdr","network","process","env","REACT_APP_STELLAR_NETWORK","isConnected","AlbedoWalletService","albedo","result","pubkey","PUBLIC","TESTNET","tx","signed_envelope_xdr","WalletManager","currentWallet","connectionListeners","restoreConnection","connectFreighter","wallet","connection","saveConnection","notifyListeners","connectAlbedo","localStorage","removeItem","getCurrentWallet","_this$currentWallet","_this$currentWallet2","onConnectionChange","listener","push","index","indexOf","splice","setItem","JSON","stringify","saved","getItem","parse","console","log","warn","forEach","walletManager"],"sources":["C:/Users/Debojyoti DM/Desktop/assetlifecyclesdk/frontend/src/services/WalletService.ts"],"sourcesContent":["import { \r\n  Networks\r\n} from '@stellar/stellar-sdk';\r\n\r\nexport interface WalletConnection {\r\n  publicKey: string;\r\n  walletType: 'freighter' | 'albedo';\r\n}\r\n\r\nexport interface TransactionResult {\r\n  hash: string;\r\n  successful: boolean;\r\n  error?: string;\r\n}\r\n\r\nexport interface WalletService {\r\n  connect(): Promise<WalletConnection>;\r\n  disconnect(): void;\r\n  getPublicKey(): string | null;\r\n  signTransaction(xdr: string): Promise<string>;\r\n  isConnected(): boolean;\r\n}\r\n\r\ndeclare global {\r\n  interface Window {\r\n    freighter?: any;\r\n    freighterApi?: any;\r\n    albedo?: {\r\n      publicKey(): Promise<{ pubkey: string }>;\r\n      tx(options: { xdr: string; network: string }): Promise<{ signed_envelope_xdr: string }>;\r\n    };\r\n  }\r\n}\r\n\r\nexport class FreighterWalletService implements WalletService {\r\n  private publicKey: string | null = null;\r\n\r\n  async connect(): Promise<WalletConnection> {\r\n    // Wait for Freighter to load\r\n    await this.waitForFreighter();\r\n    \r\n    if (!window.freighter) {\r\n      throw new Error('Freighter wallet not installed. Please install from https://freighter.app/');\r\n    }\r\n\r\n    try {\r\n      // Check if Freighter is available\r\n      const isAllowed = await window.freighter.isAllowed();\r\n      if (!isAllowed) {\r\n        await window.freighter.setAllowed();\r\n      }\r\n\r\n      const publicKey = await window.freighter.getPublicKey();\r\n      this.publicKey = publicKey;\r\n      \r\n      return {\r\n        publicKey,\r\n        walletType: 'freighter'\r\n      };\r\n    } catch (error: any) {\r\n      if (error.message?.includes('User declined access')) {\r\n        throw new Error('Please allow access to Freighter wallet and try again.');\r\n      }\r\n      throw new Error('Failed to connect to Freighter wallet. Please make sure it is unlocked.');\r\n    }\r\n  }\r\n\r\n  private async waitForFreighter(timeout = 3000): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      if (window.freighter) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      let attempts = 0;\r\n      const maxAttempts = timeout / 100;\r\n\r\n      const checkFreighter = () => {\r\n        attempts++;\r\n        if (window.freighter || attempts >= maxAttempts) {\r\n          resolve();\r\n        } else {\r\n          setTimeout(checkFreighter, 100);\r\n        }\r\n      };\r\n\r\n      checkFreighter();\r\n    });\r\n  }\r\n\r\n  disconnect(): void {\r\n    this.publicKey = null;\r\n  }\r\n\r\n  getPublicKey(): string | null {\r\n    return this.publicKey;\r\n  }\r\n\r\n  async signTransaction(xdr: string): Promise<string> {\r\n    if (!window.freighter) {\r\n      throw new Error('Freighter wallet not available');\r\n    }\r\n\r\n    if (!this.publicKey) {\r\n      throw new Error('Wallet not connected');\r\n    }\r\n\r\n    try {\r\n      const network = process.env.REACT_APP_STELLAR_NETWORK === 'mainnet' \r\n        ? 'PUBLIC' \r\n        : 'TESTNET';\r\n      \r\n      return await window.freighter.signTransaction(xdr, network);\r\n    } catch (error) {\r\n      throw new Error('Transaction signing failed. Please try again.');\r\n    }\r\n  }\r\n\r\n  isConnected(): boolean {\r\n    return !!this.publicKey && !!window.freighter;\r\n  }\r\n}\r\n\r\nexport class AlbedoWalletService implements WalletService {\r\n  private publicKey: string | null = null;\r\n\r\n  async connect(): Promise<WalletConnection> {\r\n    if (!window.albedo) {\r\n      throw new Error('Albedo wallet not available. Please visit https://albedo.link/');\r\n    }\r\n\r\n    try {\r\n      const result = await window.albedo.publicKey();\r\n      this.publicKey = result.pubkey;\r\n      \r\n      return {\r\n        publicKey: result.pubkey,\r\n        walletType: 'albedo'\r\n      };\r\n    } catch (error) {\r\n      throw new Error('Failed to connect to Albedo wallet');\r\n    }\r\n  }\r\n\r\n  disconnect(): void {\r\n    this.publicKey = null;\r\n  }\r\n\r\n  getPublicKey(): string | null {\r\n    return this.publicKey;\r\n  }\r\n\r\n  async signTransaction(xdr: string): Promise<string> {\r\n    if (!window.albedo) {\r\n      throw new Error('Albedo wallet not available');\r\n    }\r\n\r\n    if (!this.publicKey) {\r\n      throw new Error('Wallet not connected');\r\n    }\r\n\r\n    try {\r\n      const network = process.env.REACT_APP_STELLAR_NETWORK === 'mainnet' \r\n        ? Networks.PUBLIC \r\n        : Networks.TESTNET;\r\n      \r\n      const result = await window.albedo.tx({\r\n        xdr,\r\n        network\r\n      });\r\n      \r\n      return result.signed_envelope_xdr;\r\n    } catch (error) {\r\n      throw new Error('Transaction signing failed');\r\n    }\r\n  }\r\n\r\n  isConnected(): boolean {\r\n    return !!this.publicKey;\r\n  }\r\n}\r\n\r\nexport class WalletManager {\r\n  private currentWallet: WalletService | null = null;\r\n  private connectionListeners: ((connection: WalletConnection | null) => void)[] = [];\r\n\r\n  constructor() {\r\n    // Try to restore connection on page load\r\n    this.restoreConnection();\r\n  }\r\n\r\n  async connectFreighter(): Promise<WalletConnection> {\r\n    const wallet = new FreighterWalletService();\r\n    const connection = await wallet.connect();\r\n    \r\n    this.currentWallet = wallet;\r\n    this.saveConnection(connection);\r\n    this.notifyListeners(connection);\r\n    \r\n    return connection;\r\n  }\r\n\r\n  async connectAlbedo(): Promise<WalletConnection> {\r\n    const wallet = new AlbedoWalletService();\r\n    const connection = await wallet.connect();\r\n    \r\n    this.currentWallet = wallet;\r\n    this.saveConnection(connection);\r\n    this.notifyListeners(connection);\r\n    \r\n    return connection;\r\n  }\r\n\r\n  disconnect(): void {\r\n    if (this.currentWallet) {\r\n      this.currentWallet.disconnect();\r\n      this.currentWallet = null;\r\n    }\r\n    \r\n    localStorage.removeItem('stellar_pump_wallet');\r\n    this.notifyListeners(null);\r\n  }\r\n\r\n  getCurrentWallet(): WalletService | null {\r\n    return this.currentWallet;\r\n  }\r\n\r\n  getPublicKey(): string | null {\r\n    return this.currentWallet?.getPublicKey() || null;\r\n  }\r\n\r\n  async signTransaction(xdr: string): Promise<string> {\r\n    if (!this.currentWallet) {\r\n      throw new Error('No wallet connected');\r\n    }\r\n\r\n    return await this.currentWallet.signTransaction(xdr);\r\n  }\r\n\r\n  isConnected(): boolean {\r\n    return this.currentWallet?.isConnected() || false;\r\n  }\r\n\r\n  onConnectionChange(listener: (connection: WalletConnection | null) => void): () => void {\r\n    this.connectionListeners.push(listener);\r\n    \r\n    // Return unsubscribe function\r\n    return () => {\r\n      const index = this.connectionListeners.indexOf(listener);\r\n      if (index > -1) {\r\n        this.connectionListeners.splice(index, 1);\r\n      }\r\n    };\r\n  }\r\n\r\n  private saveConnection(connection: WalletConnection): void {\r\n    localStorage.setItem('stellar_pump_wallet', JSON.stringify(connection));\r\n  }\r\n\r\n  private async restoreConnection(): Promise<void> {\r\n    try {\r\n      const saved = localStorage.getItem('stellar_pump_wallet');\r\n      if (!saved) return;\r\n\r\n      const connection: WalletConnection = JSON.parse(saved);\r\n      \r\n      if (connection.walletType === 'freighter') {\r\n        // Wait for Freighter to load\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        \r\n        if (window.freighter) {\r\n          try {\r\n            const wallet = new FreighterWalletService();\r\n            await wallet.connect();\r\n            this.currentWallet = wallet;\r\n            this.notifyListeners(connection);\r\n          } catch (error) {\r\n            console.log('Could not restore Freighter connection:', error);\r\n            localStorage.removeItem('stellar_pump_wallet');\r\n          }\r\n        }\r\n      } else if (connection.walletType === 'albedo') {\r\n        // Albedo doesn't persist connections, user needs to reconnect\r\n        localStorage.removeItem('stellar_pump_wallet');\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to restore wallet connection:', error);\r\n      localStorage.removeItem('stellar_pump_wallet');\r\n    }\r\n  }\r\n\r\n  private notifyListeners(connection: WalletConnection | null): void {\r\n    this.connectionListeners.forEach(listener => listener(connection));\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nexport const walletManager = new WalletManager();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}